# PHPUnitのカバレッジレポート

コードカバレッジは、テストによってどの程度のコードが実行されたかを測定する指標です。PHPUnitでは、以下の方針でカバレッジレポートを生成・管理しています：

- `coverage` ディレクトリにPHPUnitのカバレッジレポートを出力し、保管します
- このディレクトリはgit管理外のため、git上には存在せず、ローカル環境でのみ出力・利用します
- カバレッジレポートの設定は `phpunit.xml` ファイルの `<coverage>` セクションで定義されています
- HTMLフォーマットのレポートは `coverage` ディレクトリに、Cloverフォーマットのレポートは `coverage.xml` ファイルに出力されます

## カバレッジレポートの生成方法

```bash
# カバレッジレポートを生成するPHPUnitテストの実行
php artisan test --coverage
```

## カバレッジレポートの活用方法

- HTMLレポートをブラウザで開き、テストカバレッジの視覚的な確認が可能
- 未テストのコード部分を特定し、テスト強化の優先順位付けに活用
- コードの品質向上のための指標として利用

## カバレッジ目標

プロジェクトでは、以下のカバレッジ目標を設定しています：

- 全体のコードカバレッジ: 80%以上
- 重要なビジネスロジック（計算クラスなど）: 90%以上
- 新規追加コード: 85%以上

**注意**: カバレッジ100%を目指すことが目的ではなく、重要なビジネスロジックや複雑な条件分岐が適切にテストされていることを確認するための指標として活用してください。

## カバレッジレポートの解釈

カバレッジレポートには以下の情報が含まれています：

1. **行カバレッジ**: コード内の各行が少なくとも1回実行されたかどうか
2. **分岐カバレッジ**: 条件分岐（if文など）の各分岐が実行されたかどうか
3. **関数カバレッジ**: 各関数やメソッドが少なくとも1回呼び出されたかどうか
4. **クラスカバレッジ**: 各クラスが少なくとも1回インスタンス化されたかどうか

これらの指標を総合的に評価し、テストの質を向上させるための施策を検討してください。

## 関連ドキュメント

- [ユニットテスト](unit-tests.md) - PHPユニットテストの実装方針
- [PHP開発ガイドライン](../php-guidelines.md) - App\Calculationsクラスと分数計算の実装
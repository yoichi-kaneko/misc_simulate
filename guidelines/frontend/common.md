# フロントエンド共通ガイドライン

## 共通ライブラリとツール

フロントエンド開発では、以下の共通ライブラリとツールを使用しています：

- **KaTeX**: 数式を表示するためのライブラリ
- **Chart.js**: データの視覚化とチャート表示
- **Axios**: APIリクエストの送信
- **Vite**: ビルドツールとして使用
- **ESLint**: コード品質の確保
- **Prettier**: コードフォーマットの統一

## UI実装ガイドライン

### フォーム実装

- フォーム入力値のバリデーションはクライアントサイドとサーバーサイドの両方で実施
- 入力エラーは即時フィードバックを提供
- フォーム入力値のリセット機能を実装
- 計算中はスピナーを表示して処理中であることをユーザーに伝える

### 数式表示

- 数式の表示にはKaTeXライブラリを使用
- 複雑な数式はサーバーサイドでLaTeX形式に変換してからクライアントで表示
- 数式のレンダリングは非同期で行い、UIのブロッキングを防止

```javascript
// KaTeXを使用した数式表示の例
import katex from 'katex';

function renderMathFormula(formula, elementId) {
  const element = document.getElementById(elementId);
  katex.render(formula, element, {
    throwOnError: false,
    displayMode: true
  });
}
```

### チャート表示

- データの視覚化にはChart.jsを使用
- チャートは適切なタイプ（折れ線グラフ、棒グラフなど）を選択
- チャートには適切なラベルと凡例を付与
- チャートのダウンロード機能を提供（PNG、JPG形式）

### レスポンシブデザイン

- モバイルファーストのアプローチでデザイン
- メディアクエリを使用して異なる画面サイズに対応
- フレキシブルなグリッドレイアウトを使用
- タッチデバイスでの操作性を考慮

## コード品質管理

ESLintを導入して、コードの品質と一貫性を確保しています：

- `eslint.config.mjs`ファイルでプロジェクト固有のルールを定義
- `package.json`のスクリプトセクションにESLint関連のコマンドを追加

```json
{
  "scripts": {
    "lint": "eslint --ext .js,.ts,.tsx src",
    "lint:fix": "eslint --ext .js,.ts,.tsx src --fix"
  }
}
```

package.jsonのスクリプト例です。

### ESLintの現状と課題

ESLintを導入しましたが、現在は修正が未完了で、ESLintチェックを行なってもエラーが発生します。順次原因箇所の調査、修正を行なっていきます。主な課題は以下の通りです：

1. 既存のjQueryコードがESLintルールに準拠していない
2. TypeScriptの型定義が不完全な箇所がある
3. 非推奨のAPIや構文が使用されている箇所がある

### コード品質向上の取り組み

今後、以下の取り組みを進めていきます：

1. CIパイプラインにESLintチェックを組み込む
2. プルリクエスト時に自動的にコードレビューを実施
3. コードカバレッジの測定と向上
4. パフォーマンス測定と最適化

## パフォーマンス最適化

フロントエンドのパフォーマンスを最適化するために、以下の施策を実施しています：

1. **コード分割**: 必要なコードのみを読み込むようにバンドルを分割
2. **遅延読み込み**: 必要になった時点でコンポーネントを読み込む
3. **メモ化**: 不要な再計算を防止するためにメモ化を活用
4. **アセット最適化**: 画像やフォントの最適化
5. **キャッシュ戦略**: 適切なキャッシュヘッダーの設定

## 関連ドキュメント

- [TypeScript開発ガイドライン](typescript.md) - JavaScriptからTypeScriptへの移行
- [React開発ガイドライン](react.md) - jQueryからReactへの移行
